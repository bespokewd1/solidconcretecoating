---
import BaseLayout from "@layouts/BaseLayout.astro";
import CTA from "@components/CTA.astro";
import CTALink from "@components/CTALink.astro";
import { Image } from "astro-lqip/components";
import Landing from "@components/Landing.astro";

// Optimize our landing image and pass it as props to the BaseLayout (for preloading) and Landing (for rendering)
import landingImage from "@assets/images/landing.jpg"; // <-- THE PATH TO THE ASSET YOU WANT TO PRELOAD - The asset must live in src

import { getImage } from "astro:assets";
import Topper from "@components/Topper.astro";

import scv1 from "@assets/images/services/commerce-1.png";
import svc2 from "@assets/images/services/commerce-2.png";
import svc3 from "@assets/images/services/commerce-3.png";

import svc4 from "@assets/images/services/industry-1.png";
import svc5 from "@assets/images/services/industry-2.png";
import svc6 from "@assets/images/services/industry-3.png";

import svc8 from "@assets/images/services/res-floor-2.png";
import svc9 from "@assets/images/services/res-floor-3.png";
import svc10 from "@assets/images/services/res-floor-4.png";
import svc11 from "@assets/images/services/res-floor-5.png";

import svc12 from "@assets/images/services/service-1.png";
import svc13 from "@assets/images/services/service-2.png";
import svc14 from "@assets/images/services/service-3.png";

type ImageGallery = {
  image: ImageMetadata;
  imageAlt: string;
};

const allImages: ImageGallery[] = [
  { image: scv1, imageAlt: "Commerce service image 1" },
  { image: svc2, imageAlt: "Commerce service image 2" },
  { image: svc3, imageAlt: "Commerce service image 3" },

  { image: svc4, imageAlt: "Industry service image 1" },
  { image: svc5, imageAlt: "Industry service image 2" },
  { image: svc6, imageAlt: "Industry service image 3" },

  { image: svc8, imageAlt: "Residential floor service image 2" },
  { image: svc9, imageAlt: "Residential floor service image 3" },
  { image: svc10, imageAlt: "Residential floor service image 4" },
  { image: svc11, imageAlt: "Residential floor service image 5" },

  { image: svc12, imageAlt: "Service image 1" },
  { image: svc13, imageAlt: "Service image 2" },
  { image: svc14, imageAlt: "Service image 3" },
];

const optimizedImage = await getImage({ src: landingImage, format: "avif" });
---

<BaseLayout
  title="Projects"
  description="Meta description for the page"
  ogImage={optimizedImage}
>
  <!-- ============================================ -->
  <!--                    LANDING                   -->
  <!-- ============================================ -->

  <!-- <Landing title="All projects" image={optimizedImage} /> -->

  <!-- ============================================ -->
  <!--                   Gallery                    -->
  <!-- ============================================ -->

  <section id="gallery">
    <div class="cs-container">
      <div
        class="cs-content w-full pt-8"
        data-once="true"
        data-reveal
        data-direction="top"
      >
        <Topper class="justify-center" iconName="tabler:photo">
          Gallery
        </Topper>
        <!-- <span
          class="w-full text-center text-sm font-medium tracking-wide text-accent uppercase italic"
        >
        </span> -->
        <!-- mb-4 text-heading font-extrabold tracking-wide uppercase -->

        <h1
          class="w-full py-0 text-center text-2xl text-h2 font-bold text-fore-dark"
        >
          Epoxy Floor & Concrete Coatings Gallery
        </h1>
        <p
          class="mx-auto mb-8 max-w-prose font-mont text-lg leading-relaxed text-fore-dark/80"
        >
          See the quality and variety of our work. From residential garages to
          commercial spaces, our coatings deliver exceptional durability and
          aesthetics.
        </p>
      </div>

      {
        allImages.length > 0 && (
          <div class="gallery-scroll-container mb-16 max-h-[1250px] overflow-y-auto xl:max-h-[2500px]">
            <div class="columns-1 sm:columns-2 lg:columns-3">
              {allImages.map((item: ImageGallery, imgIndex: number) => (
                <div
                  class="group relative mb-4 break-inside-avoid overflow-hidden"
                  data-stagger-b
                  data-distance-y="200"
                  data-delay-s={imgIndex * 0.11}
                  data-once="true"
                >
                  <Image
                    src={item.image}
                    alt={item.imageAlt}
                    class="h-auto w-full object-cover"
                    lqip="base64"
                    lqipSize={10}
                  />
                </div>
              ))}
            </div>
          </div>
        )
      }

      <CTALink variant="primary">Get Free Quote</CTALink>
    </div>
  </section>
  <CTA />
</BaseLayout>

<style lang="less">
  /* PAGE-SPECIFIC STYLES FOR THE PROJECTS PAGE */

  /*-- -------------------------- -->
<---          Gallery           -->
<--- -------------------------- -*/

  /* Mobile - 360px - Contains hover animation */
  @media only screen and (min-width: 0em) {
    #gallery {
      /* Centers button */
      text-align: center;
      padding: var(--sectionPadding);
      position: relative;
      /* Prevents overflow from the image going off screen */
      overflow: hidden;
      .cs-container {
        width: 100%;
        max-width: (1322/16em);
        margin: auto;
      }

      .cs-image-group {
        /* used rem so it doesn't scale with the font size of on parent */
        font-size: ~"min(1.1vw, 1em)";
        width: 100%;
        max-width: (1322/16em);
        margin: 0 auto (60/16rem);
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: (30/16em);
      }

      .cs-row {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        gap: (30/16em);
      }

      .cs-picture {
        display: block;
        position: relative;
        img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-row-1 {
        .cs-picture1 {
          width: (420/16em);
          height: (567/16em);
        }

        .cs-picture2 {
          width: (420/16em);
          height: (629/16em);
        }

        .cs-picture3 {
          width: (420/16em);
          height: (512/16em);
        }
      }

      .cs-row-2 {
        .cs-picture1 {
          width: (420/16em);
          height: (492/16em);
        }

        .cs-picture2 {
          width: (420/16em);
          height: (517/16em);
        }

        .cs-picture3 {
          width: (420/16em);
          height: (629/16em);
        }
      }

      .cs-row-3 {
        .cs-picture1 {
          width: (420/16em);
          height: (625/16em);
        }

        .cs-picture2 {
          width: (420/16em);
          height: (452/16em);
        }

        .cs-picture3 {
          width: (420/16em);
          height: (629/16em);
        }
      }
    }
  }
</style>
