---
import poly from "@assets/images/coatings/poly.png";
import epoxy from "@assets/images/coatings/epoxy.png";
import sealed from "@assets/images/coatings/sealed.png";
import CTALink from "@components/CTALink.astro";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import type { HTMLAttributes } from "astro/types";
import { discriminatedUnion } from "astro:schema";

type Props = HTMLAttributes<"section">;

type ServiceInfo = {
  Image: ImageMetadata;
  title: string;
  description: string;
  href: string;
  linkLabel: string;
};

const services: ServiceInfo[] = [
  {
    Image: poly,
    title: "Polyaspartic Coatings",
    description: `Our polyaspartic systems deliver exceptional durability and UV resistance,
    making them ideal for Edmonton’s changing temperatures.
    These fast‑curing coatings won’t chip, peel, or scratch and stand up to hot‑tire pickup, chemicals, and heavy use.
    Choose from popular decorative flakes or let us customize a color and flake blend that perfectly matches your garage, shop, or outdoor space.`,
    href: "/services",
    linkLabel: "Polyaspartic Coatings",
  },
  {
    Image: epoxy,
    title: "Epoxy Coatings",
    description: `Our epoxy flooring combines premium resins and hardeners to create a seamless,
    high‑gloss surface that bonds tightly to concrete. Engineered for long‑lasting performance,
    it resists stains, impacts, and moisture—perfect for garages, basements, warehouses, and commercial spaces.
    With a wide range of colors and flake options, we tailor each floor to suit your style and traffic demands.`,
    href: "/services",
    linkLabel: "Epoxy Coatings",
  },
  {
    Image: sealed,
    title: "Driveway Sealing",
    description: `Protect and refresh your driveway with our professional concrete sealing services in Edmonton.
    We use high‑quality sealers that guard against moisture, salt, oil, and freeze‑thaw damage while enhancing color and curb appeal.
    A sealed driveway is easier to clean, lasts longer, and keeps your property looking sharp season after season.`,
    href: "/services",
    linkLabel: "Driveway Sealing",
  },
];

const { class: className, ...props } = Astro.props;
---

<section
  class="px-1 pt-0 pb-section-padding sm:px-4"
  class:list={[className]}
  {...props}
>
  <h2 class="mb-8 text-center text-h2 font-bold">Our Specializations</h2>
  <div
    class="mx-auto grid grid-cols-1 gap-5 p-4 sm:max-lg:max-w-150 md:gap-6 md:p-6 lg:grid-cols-3"
  >
    {
      services.map((service, idx) => {
        const directions = ["left", "bottom", "right"];
        let direction = directions[idx % 3];

        return (
          <article
            class="bg-neutral-200"
            data-reveal
            data-direction={direction}
            data-once="true"
          >
            <div class="grid h-full -translate-1.5 grid-rows-[1fr_1fr] flex-col items-center bg-neutral-50">
              <Image
                src={service.Image}
                alt={service.title}
                class={"size-full object-contain"}
              />

              <div class="flex h-full flex-1 flex-col gap-5 p-4 lg:px-8 lg:pb-8">
                <h2 class="font-mont text-heading font-extrabold tracking-wide text-fore-dark uppercase">
                  {service.title}
                </h2>

                <p class="flex-1 font-mont leading-[1.8rem] tracking-normal text-fore-dark/90">
                  {service.description}
                </p>

                <CTALink
                  href={service.href}
                  variant="primary"
                  label={service.linkLabel}
                  class="justify-center"
                  showIcon={true}
                />
              </div>
            </div>
          </article>
        );
      })
    }
  </div>
</section>
