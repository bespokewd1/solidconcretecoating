---
import { Image } from "astro-lqip/components";
import { Icon } from "astro-icon/components";
import CTALink from "@components/CTALink.astro";

import BeforeAfterSlider from "@components/BeforeAfterSlider.astro";

import comFloor from "@assets/images/services/commerce-1.png";
import comFloor2 from "@assets/images/services/commerce-2.png";
import comFloor3 from "@assets/images/services/commerce-3.png";
import comFloor4 from "@assets/images/services/industry-1.png";
import comFloor5 from "@assets/images/services/industry-2.png";
import comFloor6 from "@assets/images/services/industry-3.png";
import cn from "@utils/cn";

type ServiceCategory = {
  icon: string;
  text: string;
  description: string;
  beforeImage: ImageMetadata;
  afterImage: ImageMetadata;
};

const serviceCategories: ServiceCategory[] = [
  {
    icon: "tabler:building-warehouse",
    text: "Warehouses & Factories",
    description:
      "High-build, abrasion-resistant flooring designed for forklifts, pallets, and heavy daily traffic.",
    beforeImage: comFloor,
    afterImage: comFloor2,
  },
  {
    icon: "tabler:chef-hat",
    text: "Restaurants & Cafeterias",
    description:
      "Easy-to-clean, chemical- and stain-resistant floors that help handle spills, grease, and constant washdowns.",
    beforeImage: comFloor2,
    afterImage: comFloor3,
  },
  {
    icon: "tabler:shopping-cart",
    text: "Retail & Showrooms",
    description:
      "Glossy, professional finishes that elevate your space while standing up to foot traffic and scuffs.",
    beforeImage: comFloor3,
    afterImage: comFloor4,
  },
  {
    icon: "tabler:barbell",
    text: "Fitness Centers",
    description:
      "Durable, slip-resistant surfaces built for impact, sweat, and frequent cleaningâ€”great for high-traffic zones.",
    beforeImage: comFloor4,
    afterImage: comFloor5,
  },
];
---

<section
  id="commercial-industrial-flooring"
  class="scroll-mt-32 bg-fore-light px-4 py-section-padding sm:px-8"
  data-content-active="1"
>
  <div class="mx-auto max-w-7xl">
    <div class="grid items-center gap-12 lg:grid-cols-2 lg:gap-16">
      <!-- Image - Order first on desktop -->
      <div
        id="com-content-grid"
        class="order-2 lg:order-1"
        data-reveal
        data-direction="left"
        data-distance-x="50"
        data-once="true"
      >
        <div class="col-span-full grid overflow-hidden pr-10 pb-10">
          {
            serviceCategories.map((item, idx) => (
              <div
                class="group relative rounded-sm [grid-area:1/1]"
                data-content={idx + 1}
                style="display: none;"
              >
                <BeforeAfterSlider
                  beforeImage={item.beforeImage}
                  beforeAlt={`${item.text} before coating`}
                  afterAlt={`${item.text} after coating`}
                  afterImage={item.afterImage}
                />

                <div class="absolute -right-4 -bottom-4 z-20 grid place-content-center items-center overflow-hidden sm:-right-8 sm:-bottom-8">
                  <div class="rounded-sm bg-primary p-6 transition-all [grid-area:1/1] group-hover:translate-x-[150%] group-hover:opacity-0 group-hover:transition-opacity">
                    <Icon
                      name={item.icon}
                      class="mb-2 size-8 text-fore-light/90"
                    />
                    <p class="font-mont text-sm font-bold text-fore-light">
                      {item.text}
                    </p>
                  </div>
                  <div class="size-0 translate-x-full place-content-center overflow-hidden rounded-sm bg-primary p-0 transition-transform duration-200 ease-in [grid-area:1/1] group-hover:size-full group-hover:translate-x-0 group-hover:p-6">
                    <p class="font-mont text-sm font-bold text-fore-light">
                      {item.description}
                    </p>
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <!-- h-80 sm:h-[500px] -->
        <!-- <div class="relative">
          <div class="overflow-hidden rounded-sm shadow-2xl">
            <div class="w-full">
              <BeforeAfterSlider
                beforeImage={comFloor}
                afterImage={comFloor2}
              />
            </div>
          </div>
          <div
            class="absolute -right-4 -bottom-4 z-1 rounded-sm bg-primary p-6 shadow-xl sm:-right-8 sm:-bottom-8"
          >
            <Icon
              name="tabler:building-factory-2"
              class="mb-2 size-8 text-fore-light/90"
            />
            <p class="font-mont text-sm font-bold text-fore-light">
              Industrial<br />Grade
            </p>
          </div>
        </div> -->
      </div>

      <!-- Content -->
      <div
        class="order-1 lg:order-2"
        data-reveal
        data-direction="right"
        data-distance-x="50"
        data-delay-s="0.15"
        data-once="true"
      >
        <div class="mb-4 flex items-center gap-3">
          <div
            class="flex size-12 items-center justify-center rounded-full bg-accent/10"
          >
            <Icon name="tabler:building-factory-2" class="size-6 text-accent" />
          </div>
          <span
            class="font-mont text-sm font-bold tracking-widest text-accent uppercase"
          >
            Commercial
          </span>
        </div>

        <h2
          class="mb-6 font-mont text-3xl font-bold text-fore-dark sm:text-4xl"
        >
          Commercial & Industrial Flooring
        </h2>

        <p class="mb-8 font-mont text-lg leading-relaxed text-fore-dark/80">
          We provide commercial and industrial concrete coating solutions built
          to withstand heavy traffic, machinery, and chemicals. Ideal for
          warehouses, gyms, restaurants, showrooms, and retail spaces.
        </p>

        <!-- Industries Served -->
        <div class="mb-8">
          <h3
            class="mb-4 font-mont text-sm font-bold tracking-widest text-fore-dark/50 uppercase"
          >
            Industries Served
          </h3>
          <div class="grid grid-cols-2 gap-3">
            {
              serviceCategories.map((item, idx) => (
                <button
                  class:list={cn([
                    "flex items-center gap-3 rounded-sm bg-white p-3 shadow-sm",
                    idx === 0 ? "bg-accent/30" : "",
                  ])}
                  data-tab={idx + 1}
                >
                  <Icon name={item.icon} class="size-5 text-accent" />
                  <span class="font-mont text-sm font-medium text-fore-dark/60">
                    {item.text}
                  </span>
                </button>
              ))
            }
          </div>
        </div>

        <!-- Benefits -->
        <div class="mb-8">
          <h3
            class="mb-4 font-mont text-sm font-bold tracking-widest text-fore-dark/50 uppercase"
          >
            Benefits
          </h3>
          <ul class="space-y-3">
            {
              [
                "Durable & Long-Lasting",
                "Slip-Resistant & Safe",
                "Easy to Clean & Maintain",
                "Customizable Finishes for Branding",
              ].map((benefit) => (
                <li class="flex items-center gap-3 font-mont text-fore-dark/60">
                  <Icon
                    name="tabler:circle-check-filled"
                    class="size-5 shrink-0 text-primary"
                  />
                  {benefit}
                </li>
              ))
            }
          </ul>
        </div>

        <CTALink
          label="Request Commercial Quote"
          variant="primary"
          showIcon={true}
        />
        <!-- <a
          href="/contact"
          class:list={[
            "inline-flex items-center gap-2 px-8 py-4 font-mont font-bold",
            "border-2 border-amber-300 bg-amber-300 text-neutral-900 transition-all duration-400",
            "hover:rounded-lg hover:border-neutral-900 hover:bg-neutral-900 hover:text-neutral-50",
          ]}
        >
          Request Commercial Quote
          <Icon name="tabler:arrow-right" class="size-5" />
        </a> -->
      </div>
    </div>
  </div>
</section>

<script>
  import { switchTab } from "@js/switchTab";

  document.addEventListener("astro:page-load", () => {
    switchTab("commercial-industrial-flooring", "#com-content-grid");
  });
</script>
