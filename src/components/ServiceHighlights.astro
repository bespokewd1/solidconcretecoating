---
// src/components/ServicesHighlights.astro
import { Icon } from "astro-icon/components";
import type { HTMLAttributes } from "astro/types";
import { Image } from "astro-lqip/components";

import service1 from "@assets/images/services/b4-after-res.webp";
import service2 from "@assets/images/services/b4-after-com.webp";
import service3 from "@assets/images/services/b4-after-coat.webp";
import service4 from "@assets/images/services/flake-1.png";

type Props = HTMLAttributes<"section">;

type Service = {
  img: ImageMetadata;
  title: string;
  description: string;
  href: string;
};

const services: Service[] = [
  {
    img: service1,
    title: "Residential Coatings",
    description:
      "Transform your home floors with durable, easy-to-clean surfaces.",
    href: "/services/#residential-coatings",
  },
  {
    img: service2,
    title: "Commercial & Industrial Flooring",
    description:
      "Heavy-duty coatings designed for warehouses, gyms, showrooms, and factories.",
    href: "/services/#commercial-industrial-flooring",
  },
  {
    img: service3,
    title: "Concrete Sealing & Repair",
    description:
      "Long-lasting, slip-resistant solutions for walkways and outdoor spaces.",
    href: "/services/#concrete-sealing-repair",
  },
  {
    img: service4,
    title: "Flake Colors / Customization",
    description: "Pick colors or combinations to match your style or brand.",
    href: "/services/#flake-colors-customization",
  },
];

const directions = ["top-left", "top-right", "bottom-left", "bottom-right"];

const { class: className, ...props } = Astro.props;
---

<section
  class:list={["bg-fore-light px-4 py-section-padding", className]}
  {...props}
>
  <div class="mx-auto max-w-7xl">
    <!-- Header -->
    <div class="mb-12 text-center">
      <span
        class="mb-2 block font-mont text-sm font-bold tracking-widest text-accent uppercase"
        data-stagger-b
        data-distance-y="30"
        data-delay-s="0.1"
        data-once="true"
      >
        Our Services
      </span>
      <h2
        class="font-mont text-h2 font-bold text-fore-dark"
        data-stagger-b
        data-distance-y="30"
        data-delay-s="0.15"
        data-once="true"
      >
        What We Offer
      </h2>
    </div>

    <!-- Services Grid -->
    <div
      class="grid grid-cols-1 grid-rows-2 gap-6 sm:grid-cols-2"
      data-stagger-child-b
      data-distance-y="40"
      data-delay-s="0.2"
      data-once="true"
    >
      {
        services.map((service, idx) => {
          let direction = directions[idx % 4];
          return (
            <a
              data-reveal
              data-direction={direction}
              data-once="true"
              href={service.href}
              class="group relative grid items-end overflow-hidden rounded-sm bg-fore-light p-0 shadow-md"
            >
              <div class="-z-1 size-full [grid-area:1/1]">
                <Image
                  src={service.img}
                  alt={service.title}
                  class="size-full object-cover transition-transform duration-300 group-hover:scale-105"
                />
              </div>
              <div class="flex flex-col gap-1 bg-linear-180 from-transparent to-black mask-[linear-gradient(360deg,#000_80%,transparent)] p-6 pt-10 backdrop-blur-[5px] [grid-area:1/1]">
                <h3 class="font-mont text-lg font-bold text-fore-light transition-colors duration-300">
                  {service.title}
                </h3>
                <p class="mb-4 font-mont text-sm leading-relaxed text-neutral-100">
                  {service.description}
                </p>

                <div
                  class:list={[
                    "group flex w-fit items-center justify-center gap-3 p-2 px-4 font-bold",
                    "border-2 border-primary bg-primary text-fore-light transition-[background-color,color,border-radius] delay-0 duration-400 before:hidden",
                    "group-hover:rounded-lg group-hover:bg-fore-light group-hover:text-fore-dark",
                    "corner-squircle supports-[corner-shape:squircle]:group-hover:rounded-[50px]",
                  ]}
                >
                  Learn more
                  <Icon
                    name={"tabler:chevron-right"}
                    class={
                      "size-5 transition-transform duration-400 group-hover:translate-x-2"
                    }
                  />
                </div>
              </div>
            </a>
          );
        })
      }
    </div>
  </div>
</section>
