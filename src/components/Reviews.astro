---
import type { HTMLAttributes } from "astro/types";
import { Icon } from "astro-icon/components";

type IconProp = typeof Icon;

type Review = {
  name: string;
  role?: string;
  text: string;
  rating: number; // 1-5
  avatar?: string;
};

const reviews: Review[] = [
  {
    name: "Mark H.",
    role: "Homeowner in Edmonton",
    text: "Solid Concrete Coating Ltd. transformed our garage in one day. The polyaspartic finish looks incredible and cleans up easily. The team was on time, tidy, and friendly. Highly recommend!",
    rating: 5,
    avatar: "https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile5.png",
  },
  {
    name: "Samantha K.",
    role: "Small Business Owner",
    text: "We needed a durable, low‑maintenance floor for our retail space. The crew helped us pick a flake system that hides dirt and resists scuffs. Great communication and a flawless result.",
    rating: 5,
    avatar: "https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile-4.png",
  },
  {
    name: "Andre P.",
    role: "Shop Manager",
    text: "Our workshop floor takes a beating. Their industrial coating stands up to spills and heavy equipment and has better traction. Free estimate was quick and the install was smooth.",
    rating: 5,
    avatar: "https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile5.png",
  },
];

type Props = HTMLAttributes<"section">;

const { ...props } = Astro.props;
---

<section id="reviews" {...props}>
  <div class="cs-container">
    <span class="cs-topper">Customer Reviews</span>
    <h2 class="cs-title">Edmonton Epoxy Flooring Reviews</h2>
    <p class="cs-text leading-[1.8]">
      See what homeowners and businesses in Edmonton say about Solid Concrete
      Coating Ltd. We deliver durable, low‑maintenance epoxy and polyaspartic
      floors with friendly service and free estimates.
    </p>

    <ul class="cs-card-group items-stretch">
      {
        reviews.map((r) => (
          <li class="cs-item">
            {r.avatar && (
              <img
                class="cs-item-img"
                aria-hidden="true"
                loading="lazy"
                decoding="async"
                src={r.avatar}
                alt="profile picture"
                width="80"
                height="80"
              />
            )}

            <p class="cs-item-p">{r.text}</p>

            <span class="cs-reviewer">
              {r.name}
              {r.role && <span class="cs-desc">{r.role}</span>}
            </span>

            <div
              class="flex items-center gap-1"
              aria-label={`Rating: ${r.rating} out of 5`}
            >
              <div class="flex shrink-0 gap-1">
                {Array.from({ length: 5 }, (_, i) => (
                  <svg
                    class:list={[
                      "h-5 w-6",
                      i < r.rating
                        ? "fill-[#FFA500] text-[#FFA500]"
                        : "fill-gray-300 text-gray-300",
                    ]}
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                  >
                    <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                  </svg>
                ))}
              </div>
            </div>
          </li>
        ))
      }
    </ul>

    <a aria-label="read more reviews" href="/reviews" class="cs-button-solid">
      Our Reviews
    </a>
  </div>
</section>
<!--
<section id="reviews" {...props}>
  <div class="cs-container">
    <span
      class="text-sm font-medium tracking-wider text-amber-500 uppercase italic"
      >Our Reviews</span
    >
    <h2 class="mb-4 text-heading font-extrabold tracking-wide uppercase">
      Words From Our Customers
    </h2>
    <p class="cs-text">
      See what homeowners and businesses in Edmonton say about Solid Concrete
      Coating Ltd. We deliver durable, low‑maintenance epoxy and polyaspartic
      floors with friendly service and free estimates.
    </p>
    <ul class="cs-card-group">
      <li class="cs-item">
        <img
          class="cs-item-img"
          aria-hidden="true"
          loading="lazy"
          decoding="async"
          src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile5.png"
          alt="profile picture"
          width="80"
          height="80"
        />
        <p class="cs-item-p">
          Dictum dolor, nullam morbi sem in auctor proin. Consequat dolor
          habitasse nam sed tempor. Viverra magna pharetra rhoncus, nec sed
          ullamcorper lectus et. Auctor velit diam fermentum consequat. Feugiat
          viverra massa urna, volutpat orci imperdiet eget eget.
        </p>
        <span class="cs-reviewer">
          Jon Doe
          <span class="cs-desc">Homeowner</span>
        </span>
        <img
          class="cs-item-stars"
          aria-hidden="true"
          loading="lazy"
          decoding="async"
          src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/stars-yellow.svg"
          alt="stars"
          width="96"
          height="16"
        />
      </li>
      <li class="cs-item">
        <img
          class="cs-item-img"
          aria-hidden="true"
          loading="lazy"
          decoding="async"
          src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile-4.png"
          alt="profile picture"
          width="80"
          height="80"
        />
        <p class="cs-item-p">
          Dictum dolor, nullam morbi sem in auctor proin. Consequat dolor
          habitasse nam sed tempor. Viverra magna pharetra rhoncus, nec sed
          ullamcorper lectus et. Auctor velit diam fermentum consequat. Feugiat
          viverra massa urna, volutpat orci imperdiet eget eget.
        </p>
        <span class="cs-reviewer">
          Jane Doe
          <span class="cs-desc">Homeowner</span>
        </span>
        <img
          class="cs-item-stars"
          aria-hidden="true"
          loading="lazy"
          decoding="async"
          src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/stars-yellow.svg"
          alt="stars"
          width="96"
          height="16"
        />
      </li>
    </ul>
    <a aria-label="read more reviews" href="/reviews" class="cs-button-solid"
      >Our Reviews</a
    >
  </div>
</section> -->
<style lang="less">
  /*-- -------------------------- -->
<---          Reviews           -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    #reviews {
      /* Centers the button */
      text-align: center;
      padding: var(--sectionPadding);

      .cs-container {
        width: 100%;
        max-width: (1104/16rem);
        margin: auto;
      }

      .cs-topper {
        text-align: center;
        margin-bottom: (16/16rem);
      }

      .cs-title {
        text-align: center;
        max-width: (700/16rem);
      }

      .cs-text {
        text-align: center;
        max-width: (650/16rem);
        /* 88px - 104px */
        margin-bottom: clamp(5.5em, 10.2vw, 6.5em);
      }

      .cs-card-group {
        /* 48px - 64px */
        margin: 0 auto clamp(3rem, 5vw, 4rem);
        padding: 0;
      }

      .cs-item {
        text-align: left;
        list-style: none;
        width: 100%;
        max-width: (542/16rem);
        margin: 0 auto (64/16rem);
        /* Prevents padding from affecting height & width */
        box-sizing: border-box;
        /* Padding L & R - 16px - 32px */
        padding: (60/16rem) clamp(1rem, 3.2vw, 2rem) 0;
        /* 32px - 40px */
        padding-bottom: clamp(2rem, 5.4vw, 2.5rem);
        background: #fff;
        box-shadow: 0px 20px 39px 0px rgba(0, 0, 0, 0.05);
        border-radius: (4/16rem);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        position: relative;

        &:last-of-type {
          margin-bottom: 0;
        }
      }

      .cs-item-img {
        width: (80/16rem);
        height: (80/16rem);
        position: absolute;
        top: (-40/16rem);
      }

      .cs-item-p {
        font-size: (16/16rem);
        line-height: 1.5em;
        margin: 0 0 (20/16rem);
        padding-bottom: (20/16rem);
        color: var(--bodyTextColor);
        border-bottom: 1px solid #e8e9ec;
      }

      .cs-reviewer {
        font-size: (16/16rem);
        font-weight: 700;
        line-height: 1.5em;
        width: 40%;
        margin: 0 auto 0 0;
        color: var(--headerColor);
        display: block;
      }

      .cs-desc {
        font-size: (14/16rem);
        font-weight: 400;
        color: var(#353535);
        display: block;
      }

      .cs-item-stars {
        width: (96/16rem);
        height: (16/16rem);
      }
    }
  }

  /* Tablet - 768px */
  @media only screen and (min-width: 48em) {
    #reviews {
      .cs-card-group {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: (16/16rem);
      }

      .cs-item {
        /* reset margin so it won't interfere with flexbox */
        margin: 0;
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #reviews {
        .cs-title,
        .cs-text,
        .cs-item-p,
        .cs-reviewer {
          color: var(--bodyTextColorWhite);
        }

        .cs-item {
          background: var(--medium);
        }

        .cs-desc {
          color: var(--primaryLight);
        }
      }
    }
  }
</style>
